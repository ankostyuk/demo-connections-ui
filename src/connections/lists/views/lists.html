<!-- lists-view -->
<script id="lists-view" type="text/template">
    <div class="tab-content">
        <!-- Просмотр списков -->
        <div class="tab-pane lists-set" id="np-connections-lists-lists-set" ng-class="{'request-pending': !listsSet.isRequestDone}">
            <ul class="row lists-nav tools">
                <li class="span6" ng-show="navigation.prevTarget === '#np-connections-lists-current-list'"><a data-target="#np-connections-lists-current-list" ng-click="navigation.doNav($event)">&larr; ${_trc("вернуться к просмотру списка", "Пользовательские списки")}</a></li>
                <li class="align-right"><a data-target="#np-connections-lists-new-list" ng-click="navigation.doNav($event)"><i class="icon i-plus"></i> ${_trc("Новый список", "Пользовательские списки")}</a></li>
            </ul>
            <div class="tools order" ng-hide="listsSet.isEmpty()">
                <div class="row">
                    <div class="span9 muted" ng-hide="listsSet.successfulOrder || listsSet.getCheckedCount() > 1">
                        <span ng-hide="listsSet.getCheckedCount() === 1">${_tr("Выберете список или несколько списков для проверки связей")}</span>
                        <span ng-show="listsSet.getCheckedCount() === 1">${_tr("Вы можете выбрать несколько списков для проверки связей")}</span>
                    </div>
                    <div class="span9" ng-show="!listsSet.successfulOrder && listsSet.getCheckedCount() > 1">
                        <label class="checkbox inside-list">
                            <input type="checkbox" ng-model="listsSet.checkOptions.insideList">
                            ${_tr("проверять связи внутри каждого списка")}
                        </label>
                    </div>
                    <div class="span9" ng-show="listsSet.successfulOrder">
                        ${_trc("О готовности", "О готовности [Проверки связей] вы будете извещены по электронной почте и в [Уведомлениях]")}
                        <a ng-click="navigation.showDesktopTab('#np-connections-orders')">${_trc("Проверки связей", "О готовности [Проверки связей] вы будете извещены по электронной почте и в [Уведомлениях]")}</a>
                        ${_trc("вы будете извещены по электронной почте и в", "О готовности [Проверки связей] вы будете извещены по электронной почте и в [Уведомлениях]")}
                        <a ng-click="navigation.showDesktopTab('#np-connections-notifications')">${_trc("Уведомлениях", "О готовности [Проверки связей] вы будете извещены по электронной почте и в [Уведомлениях]")}</a>
                    </div>
                    <div class="align-right">
                        <button class="btn flat order-btn" ng-disabled="listsSet.successfulOrder || !listsSet.isChecked()" ng-click="listsSet.doOrder()"><i class="icon i-graph-cluster"></i>&nbsp;&nbsp;${_trc("Проверить связи", "Связи между объектами")}</button>
                    </div>
                </div>
            </div>
            <div class="muted align-center hide-if-request-pending" ng-show="listsSet.isEmpty()">${_trc("У вас нет списков", "Пользовательские списки")}</div>
            <ul class="lists" ng-hide="listsSet.isEmpty()">
                <li class="row list" ng-repeat="list in listsSet.result track by $index">
                    <div class="span1 list-checked-wrapper">
                        <a class="list-checked" ng-class="{'checked': list.__checked}" ng-click="listsSet.check(list)"><i class="icon" ng-class="{'i-check-checked': list.__checked, 'i-check-unchecked': !list.__checked}"></i></a>
                    </div>
                    <div class="span8 list-name-wrapper">
                        <a data-target="#np-connections-lists-current-list" ng-click="listsSet.showList(list)">{{list.name}}</a>
                    </div>
                    <div class="muted align-right">{{_tr('NP.CONNECTIONS.LIST_TYPE.' + list.type)}}</div>
                </li>
            </ul>
        </div>

        <!-- Просмотр списка -->
        <div class="tab-pane current-list" id="np-connections-lists-current-list">
            <ul class="row lists-nav tools">
                <li class="span6"><a data-target="#np-connections-lists-lists-set" ng-click="navigation.doNav($event)">&larr; ${_trc("вернуться к спискам", "Пользовательские списки")}</a></li>
            </ul>
            <div ng-if="currentList.info">
                <div class="row list-info">
                    <div class="span list-name">{{currentList.info.name}}<span np-inline-edit="currentList.info.name" proxy="currentList.inlineEditProxy"></span></div>
                    <div class="muted align-right list-type">
                        <span ng-show="currentList.isEmpty()">{{_tr('NP.CONNECTIONS.LIST_TYPE.' + currentList.info.type)}}</span>
                        <span ng-hide="currentList.isEmpty()"><np-pluralize plural="{count: currentList.getEntriesCount(), when: _tr('NG_PLURALIZE::NP.CONNECTIONS.LIST_ENTRIES.' + currentList.info.type)}"></np-pluralize></span>
                    </div>
                </div>
                <div class="align-right tools">
                    <button class="btn flat" np-inline-confirm="currentList.remove()" confirm-text='${_trc("Точно удалить список?", "Пользовательские списки")}'><i class="icon i-trash"></i>${_trc("Удалить список", "Пользовательские списки")}</button>
                </div>
                <div np-connections-lists-add-list-entries="currentList.addListEntriesProxy"></div>
                <div class="muted align-center" ng-show="currentList.isEmpty()">
                    <span ng-show="currentList.info.type === 'COMPANY'">${_trc("Нет компаний в списке", "Пользовательские списки")}</span>
                    <span ng-show="currentList.info.type === 'INDIVIDUAL'">${_trc("Нет физических лиц в списке", "Пользовательские списки")}</span>
                </div>
                <div class="list-entries" ng-hide="currentList.isEmpty()">
                    <div class="align-right tools">
                        <button class="btn flat"ng-show="currentList.info.type === 'COMPANY'" ng-disabled="!currentList.isChecked()" np-inline-confirm="currentList.removeCheckedEntries()" confirm-text='${_trc("Точно удалить выбранные компании из списка?", "Пользовательские списки")}'>${_trc("Удалить выбранные компании из списка", "Пользовательские списки")}</button>
                        <button class="btn flat"ng-show="currentList.info.type === 'INDIVIDUAL'" ng-disabled="!currentList.isChecked()" np-inline-confirm="currentList.removeCheckedEntries()" confirm-text='${_trc("Точно удалить выбранных физических лиц из списка?", "Пользовательские списки")}'>${_trc("Удалить выбранных физических лиц из списка", "Пользовательские списки")}</button>

                        <button class="btn flat" np-inline-confirm="currentList.clean()" confirm-text='${_trc("Точно очистить весь список?", "Пользовательские списки")}'>${_trc("Очистить весь список", "Пользовательские списки")}</button>
                    </div>
                    <div class="list-entry shadow-lift-lb-corner" ng-repeat="entry in currentList.entries track by $index">
                        <div class="row info">
                            <div class="span1 entry-checked-wrapper">
                                <a class="entry-checked" ng-class="{'checked': entry.__checked}" ng-click="currentList.check(entry)"><i class="icon" ng-class="{'i-check-checked': entry.__checked, 'i-check-unchecked': !entry.__checked}"></i></a>
                            </div>
                            <div class="span11 user-data-wrapper">
                                <div class="row">
                                    <div class="user-data-label">${_trc("Ваши данные", "Пользовательские списки")}:</div>
                                    <div class="user-data">
                                        <div class="text text-ellipsis">{{entry.userData}}</div>
                                        <span class="mini" np-inline-edit="entry.userData" proxy="entry.__inlineEditProxy" data="entry"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="np-rsearch-node-info" ng-show="entry.node" np-connections-node-info="entry.node"></div>
                        <div class="validation-info" ng-show="entry.validation">
                            <span ng-show="entry.validation.status === 'NOT_FOUND'">{{_tr('NP.CONNECTIONS.LIST_ENTRIES.' + currentList.info.type + '.OBJECT_NOT_FOUND')}}</span>
                            <span ng-show="entry.validation.status === 'MULTIPLE'"><np-pluralize plural="{count: entry.validation.info, when: _tr('NG_PLURALIZE::NP.CONNECTIONS.LIST_ENTRIES.' + currentList.info.type + '.OBJECT_MULTIPLE')}"></np-pluralize></span>
                            &mdash;
                            <a ng-click="entry.__inlineEditProxy.on()">
                                <span ng-show="currentList.info.type === 'COMPANY'">${_trc("уточните данные по компании", "Пользовательские списки")}</span>
                                <span ng-show="currentList.info.type === 'INDIVIDUAL'">${_trc("уточните данные по физическому лицу", "Пользовательские списки")}</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Новый список -->
        <div class="tab-pane new-list" id="np-connections-lists-new-list">
            <ul class="row lists-nav tools">
                <li class="span6"><a data-target="#np-connections-lists-lists-set" ng-click="navigation.doNav($event)">&larr; ${_trc("вернуться к спискам", "Пользовательские списки")}</a></li>
            </ul>
            <div class="row list-info">
                <div class="span5">
                    <input class="input-block-level" type="text" placeholder='${_trc("Введите наименование нового списка", "Пользовательские списки")}' ng-model="newList.info.name">
                </div>
                <div class="align-right">
                    <select class="span4" ng-model="newList.info.type">
                        <option value="" selected="!newList.info.type" disabled>${_trc("Укажите тип объектов в списке...", "Пользовательские списки")}</option>
                        <option value="COMPANY" selected="newList.info.type === 'COMPANY'">{{_tr('NP.CONNECTIONS.LIST_TYPE.COMPANY')}}</option>
                        <option value="INDIVIDUAL" selected="newList.info.type === 'INDIVIDUAL'">{{_tr('NP.CONNECTIONS.LIST_TYPE.INDIVIDUAL')}}</option>
                    </select>
                </div>
            </div>
            <div ng-show="newList.info.type" np-connections-lists-add-list-entries="newList.addListEntriesProxy"></div>
            <div class="align-right">
                <button class="btn flat" ng-disabled="!newList.isReady()" ng-click="newList.doCreateList()"><i class="icon i-save-3"></i>&nbsp;&nbsp;${_trc("Добавить новый список", "Пользовательские списки")}</button>
            </div>
        </div>
    </div>
</script>

<!-- add-list-entries-view -->
<script id="add-list-entries-view" type="text/template">
    <div class="row tools">
        <form class="span8">
            <a class="inline" ng-class="{'active': target === 'text'}" ng-click="doTarget('text')">
                <span ng-show="proxy.getListType() === 'COMPANY'">${_trc("Введите компании", "Введите ... или добавьте из файла")}</span>
                <span ng-show="proxy.getListType() === 'INDIVIDUAL'">${_trc("Введите физических лиц", "Введите ... или добавьте из файла")}</span>
            </a>
            <span class="inline">${_trc("или", "Введите ... или добавьте из файла")}</span>
            <span class="inline link add-file attach-file-wrapper" ng-class="{'active': target === 'file'}">${_trc("добавьте из файла", "Введите ... или добавьте из файла")}<input type="file" name="file" accept="text/*,text/anytext,text/comma-separated-values,application/csv"></span>
            <span class="inline file-name text-ellipsis">{{file.name}}</span>
        </form>
        <div class="align-right">
            <a class="inline underline" href="./examples/files/company-list.txt" target="_blank" ng-show="proxy.getListType() === 'COMPANY'">${_trc("Пример файла с данными компаний", "Пользовательские списки")}</a>
            <a class="inline underline" href="./examples/files/individual-list.txt" target="_blank" ng-show="proxy.getListType() === 'INDIVIDUAL'">${_trc("Пример файла с данными физических лиц", "Пользовательские списки")}</a>
        </div>
    </div>
    <div ng-show="target === 'text'">
        <textarea rows="5" wrap="off" placeholder='${_trc("Одна строка — одна компания", "Введите ... или добавьте из файла")}' ng-model="text" ng-show="proxy.getListType() === 'COMPANY'"></textarea>
        <textarea rows="5" wrap="off" placeholder='${_trc("Одна строка — одно физическое лицо", "Введите ... или добавьте из файла")}' ng-model="text" ng-show="proxy.getListType() === 'INDIVIDUAL'"></textarea>
    </div>
    <div class="row actions" ng-show="target">
        <div class="span5">
            <a ng-click="cancel()">${_trc("Отменить", "Отменить действие")}</a>
        </div>
        <div class="align-right">
            <button class="btn flat" ng-show="proxy.addActionEnabled" ng-disabled="!isAddActionReady()">
                <i class="icon i-save-3"></i>&nbsp;
                <span ng-show="proxy.getListType() === 'COMPANY'">${_trc("Добавить компании", "Пользовательские списки")}</span>
                <span ng-show="proxy.getListType() === 'INDIVIDUAL'">${_trc("Добавить физических лиц", "Пользовательские списки")}</span>
            </button>
        </div>
    </div>
</script>
